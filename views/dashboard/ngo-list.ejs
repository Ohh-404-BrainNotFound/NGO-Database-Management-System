<%- include('home-user.ejs') -%>
<link rel="stylesheet" href="/stylesheets/ngo-list.css" >
<div class="ngo__list">
    <div class="ngo__name">
        <img src="/images/arrow.png" alt="arrow"> 
        <h1>NGO's list</h1> 
    </div>
    <div class="ngo__container">

        <% response.forEach((data) => { %>
            <div class="ngo">
                <div class="ngo__card">
                    <% let src = "/uploads/" + image %> 
                    <img class="ngo__logo" src="<%= src %>" />
                    <div class="ngo__details">
                        <h1><%= data.ngo_name %></h1>
                        <a href="/dashboard-user/ngo-list/form" role="button" type="button"><button class="btn__join" id="btn__join"> Join </button></a><br>
                        <% let loc = "/dashboard-user/ngo-list/ngo/" + data.ngo_mail; %>
                      <a href="<%= loc %>"> <button class="btn__join" id="btn__join" > About </button> </a>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>
<script>
    const setNgo = async (ngoMail) => {
        var xhr = new XMLHttpRequest();
        console.log("hello")
        console.log(ngoMail);
        let url = '/dashboard-user/ngo-list/ngo/' + ngoMail;
        xhr.open('GET', url , true);
        await xhr.setRequestHeader('Content-Type', 'application/json');
        var resp = await xhr.send(
            JSON.stringify({
                ngoEmail: ngoMail
            })
        );
    }; 
    // function seeNGO() {
    // let xhr =new XMLHttpRequest();
    // xhr.open('GET','/dashboard/ngo-list/ngo',true);
    // xhr.setRequestHeader('Content-Type', 'application/json');
    // //! Replace with fetching data from ngo
  

    // xhr.send(
    //     JSON.stringify({
    //         id:3,
    //     })
    // );
    // xhr.onload =()=>{
    //     if(xhr.status ===200 && xhr.readyState ===4){
    //         window.location.href="/dashboard/ngo-list/ngo"
    //     }
    // }
    // }
</script>